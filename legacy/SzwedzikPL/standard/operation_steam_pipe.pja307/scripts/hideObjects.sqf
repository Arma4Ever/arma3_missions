#include "script_component.hpp"
/*
 * Author: SzwedzikPL
 * Hides map objects
 */

#define MAP_TYPES_BUILDING			["BUILDING","HOUSE","CHURCH","CHAPEL","FUELSTATION","HOSPITAL","RUIN","BUNKER"]
#define MAP_TYPES_VEGETATION		["TREE","SMALL TREE","BUSH"]
#define MAP_TYPES_WALL				  ["WALL","FENCE"]
#define MAP_TYPES_MISC				  ["ROCK","ROCKS","FOREST BORDER","FOREST TRIANGLE","FOREST SQUARE","CROSS","FORTRESS","FOUNTAIN","VIEW-TOWER","LIGHTHOUSE","QUAY","HIDE","BUSSTOP","ROAD","FOREST","TRANSMITTER","STACK","TOURISM","WATERTOWER","TRACK","MAIN ROAD","POWER LINES","RAILWAY","POWERSOLAR","POWERWAVE","POWERWIND","SHIPWRECK","TRAIL"]

#define CATEGORY_COMP				    [MAP_TYPES_BUILDING,MAP_TYPES_WALL,MAP_TYPES_VEGETATION,MAP_TYPES_MISC]

{
  _x params ["_area", "_value"];
  private _hidingCode = if (isServer) then {
    {_x hideObject true;_x allowDamage false;}
  } else {
    {_x hideObject true;}
  };
  _area params ["_pivot", "_a", "_b"];
  private _radius = (_a max _b) * 1.42;
  private _flags = _value call bis_fnc_decodeFlags2;
  {
    if (_x == 1) then {
      private _found = nearestTerrainObjects [_pivot, CATEGORY_COMP select _forEachIndex, _radius, false, true];
      _hidingCode forEach (_found inAreaArray _area);
    };
  } forEach _flags;
} forEach [
  [[[679.777,1733.47,0],7.5043,8.35343,358.314,true,0],15],
  [[[731.822,1757.07,0],6.34641,4.83941,204.305,true,0],15],
  [[[701.526,1739.68,0],11.8358,18.4382,176.75,true,0],15],
  [[[874.188,1620.3,0.0166016],16.5032,46.2939,182.269,true,0],8],
  [[[844.222,1657.96,0.660309],4.91852,10.1344,204.305,true,0],15],
  [[[915.207,1567.12,0.311523],4.91852,3.41152,204.305,true,0],15],
  [[[836.451,1693.26,0],4.91852,3.41152,204.305,true,0],15],
  [[[901.39,1629.93,0],4.91852,3.41152,204.305,true,0],15],
  [[[890.7,1680.3,0],4.91852,3.41152,204.305,true,0],15],
  [[[706.27,1772.12,0.103638],6.34641,4.83941,204.305,true,0],15],
  [[[10992.6,9391.52,0.990814],7.36621,7.36621,0,false,0],15],
  [[[11166.9,8227.5,1.13803],13.3027,13.3027,0,false,0],15],
  [[[11262.2,9218.64,0.115234],6.51074,6.51074,0,false,0],15],
  [[[11248.6,9224.29,2.44867],6.51074,6.51074,0,false,0],15],
  [[[11296.7,9234.45,1.681],5,5,0,false,-1],15],
  [[[11312.6,9233.17,-0.0515747],5,5,0,false,-1],15],
  [[[11287.2,9247.35,0.791229],5,5,0,false,-1],15],
  [[[11325.7,9176.18,0.053009],5,5,0,false,-1],15],
  [[[11345.9,9176.49,-0.553345],5,5,0,false,-1],15],
  [[[11325.4,9219.39,0.138794],5,5,0,false,-1],15],
  [[[11377.8,8767.57,-0.0564575],20.4795,20.4795,0,false,0],15],
  [[[11660.1,8698.66,0],17.0088,17.0088,0,false,0],15],
  [[[11647.5,8727.38,4.48178],17.0088,17.0088,0,false,0],15],
  [[[11763,9467.9,0],6.34641,4.83941,204.305,true,0],15],
  [[[11812.5,8676.76,0],2.26025,2.26025,0,false,0],15],
  [[[11826.9,8715.51,0.00305176],5,5,0,false,-1],15],
  [[[11802.7,9487.38,1.53534],6.34641,4.83941,204.305,true,0],15],
  [[[11852.5,8658.76,6.10352e-005],2.26025,2.26025,0,false,0],15],
  [[[11873.3,8718.72,0],5,5,0,false,-1],15],
  [[[11840.3,8745.61,0.000671387],2.26025,2.26025,0,false,0],15],
  [[[11851.7,8728.73,0],5,5,0,false,-1],15],
  [[[11885.6,8729.01,0],2.26025,2.26025,0,false,0],15],
  [[[11950.7,9124.33,1.45633],12.0308,7.99367,204.305,true,0],15],
  [[[11989.7,8269.06,-1.21375],15.3535,18.7783,204.305,true,0],15],
  [[[11966.3,8308.21,0],6.34641,4.83941,204.305,true,0],15],
  [[[12104.8,9179.53,0],6.34641,4.83941,204.305,true,0],15],
  [[[12117.4,9222.4,0],6.34641,4.83941,204.305,true,0],15],
  [[[12158.6,9235.78,0],6.34641,4.83941,204.305,true,0],15],
  [[[12224.2,8684.34,0],6.34641,4.83941,204.305,true,0],15],
  [[[12305.1,7555.31,-0.0238953],3.98062,2.47362,204.305,true,0],15],
  [[[12294.7,8350,-0.0130005],14.944,14.944,0,false,0],15],
  [[[12433.9,7310.39,4.66605],6.99424,5.48724,204.305,true,0],15],
  [[[12418.6,7332.79,0.037323],6.99424,7.19974,204.305,true,0],15],
  [[[12559.4,9162.43,-3.05176e-005],6.34641,4.83941,204.305,true,0],15]
];
