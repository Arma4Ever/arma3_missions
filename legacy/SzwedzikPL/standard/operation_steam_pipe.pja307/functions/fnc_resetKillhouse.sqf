#include "script_component.hpp"
/*
 * Author: SzwedzikPL
 * Resets killhouse
 */

if !(isServer) exitWith {};

private _positions = [
  [[695.204,1734.14,0],346.649],
  [[696.026,1733.88,0],346.649],
  [[702.754,1733.09,0],14.0166],
  [[695.316,1737.84,0],190.231],
  [[699.432,1740.52,0],93.7509],
  [[703.719,1738.22,0],97.462],
  [[700.316,1742.22,0],268.394],
  [[696.949,1743.88,0],275.047],
  [[707.117,1743.62,0],278.153],
  [[707.065,1747.36,0],311.676],
  [[710.552,1747,0],3.53208],
  [[702.192,1747.22,0],329.807],
  [[704.351,1747.15,0],25.6784],
  [[696.3,1745.24,0],265.458],
  [[698.344,1747.73,0],296.612],
  [[717.544,1747.56,0],56.2769],
  [[717.59,1746.7,0],61.5949],
  [[713.044,1747.11,0],344.726],
  [[714.304,1741.84,0],270.407],
  [[717.385,1736.34,0],97.7215],
  [[716.903,1737.3,0],75.3783],
  [[714.94,1739.4,0],23.9054],
  [[706.901,1736.56,0],217.631],
  [[706.974,1737.7,0],222.288],
  [[705.349,1730.92,0],248.413],
  [[705.441,1733.65,0],279.242],
  [[705.864,1732.55,0],270.777],
  [[717.597,1731.33,0],124.231],
  [[717.507,1732.26,0],113.313],
  [[710.518,1737.37,0],359.22],
  [[712.89,1739.42,0],0.169983],
  [[703.847,1741.8,0],269.727],
  [[708.057,1747.37,0],318.355],
  [[703.064,1747.1,0],338.864],
  [[696.096,1737.82,0],182.27],
  [[704.035,1736.36,0],130.547],
  [[704,1739.93,0],52.8957],
  [[717.402,1745.16,0],89.3107],
  [[701.801,1733.11,0],359.702],
  [[696.787,1734.14,0],0.264253],
  [[707.278,1745.1,0],269.1],
  [[698.346,1733.01,0],194.982],
  [[700.735,1733.47,0],179.797],
  [[716.544,1731.19,0],127.274],
  [[717.458,1734.57,0],89.8559],
  [[696.285,1746.01,0],272.053]
];

private _targets = [];

for "_i" from 1 to 9 do {
  private _target = missionNamespace getVariable [format ["mission_popup_t_%1", _i], objNull];
  if !(isNull _target) then {
    _targets pushBack _target;
  };
};

for "_i" from 1 to 3 do {
  private _target = missionNamespace getVariable [format ["mission_popup_c_%1", _i], objNull];
  if !(isNull _target) then {
    _targets pushBack _target;
  };
};

if (_targets isEqualTo []) exitWith {};

{
  private _index = round (random ((count _positions) - 1));
  private _pos = _positions deleteAt _index;

  _x setPos (_pos # 0);
  _x setDir (_pos # 1);
  _x animateSource ["terc", 0];
} forEach _targets;
